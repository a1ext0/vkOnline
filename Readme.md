# Количество общих друзей у двух человек

Скрипт позволяет узнать количество общих друзей у двух разных пользователей в ВК. Скрипт не сработает, если дать ему два закрытых или удалённых профиля.

## Быстрый запуск

Заполнить файл `/src/cr/_secret.ts` и переименовать в `/src/cr/secret.ts` (не отслеживается гитом)

```bash
Команды в терминале:
$ yarn
$ yarn build
$ yarn start

или
$ npm install
$ npm run build
$ npm run start
```

## Использование

После запуска скрипт ожидает на порту 7777 POST запросы

### Информация о пользователе

`/info`

Запрос:

```json
{
  "id": 1
}
```

Валидные данные для запроса:

- Id числом
- Ссылка на пользователя
- Никнейм

Ответ:

```json
{
  "status": 1,
  "info": {
    "id": 0,
    "first_name": "Имя",
    "last_name": "Фамилия",
    "is_closed": false,
    "can_access_closed": true,
    "domain": "Никнейм",
    "photo_100": "Ссылка на фото профиля 100х100px"
  },
  "about": "Выводится только при ошибке, описание"
}
```

### Узнать общих друзей

`http://localhost:7777/friends`

Запрос:

```json
{
  "id1": 1,
  "id2": 2
}
```

Валидные данные для запроса:

- Id числом
- Ссылка на пользователя
- Никнеймом

Ответ:

```json
{
  "status": 1,
  "friends": [],
  "about": "Описание возвращённого запроса"
}
```

`friends` - массив с пользователями, формат аналогичен первому

Список возвращаемых статусов:

- 0 - Запрос отклонён, какие-то данные не верны
- 1 - Пользователи в друзьях друг у друга
- 2 - У пользователей нет общих друзей с открытыми профилями
- 3 - Общие друзья найдены, высылается дополнительное поле `friends` со списком их id
